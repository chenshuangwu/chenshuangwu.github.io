---
title: nuxt内存泄漏
date: 2019-09-27 23:59:08
tags: nuxt
---

## nuxt内存泄漏排查

### 问题
线上nuxt项目运行一段时间经常内存占用过高，导致服务器响应慢。内存泄漏问题不太好定位，本次定位问题使用easy-monitor工具来排查。

### 运行结果
easy-monitor运行结果：泄漏链：TimerList


### 结果分析
从该结果分析可能是创建定时器没有移除。首页中有一个倒计时功能，使用了一个定时器setInterval，没有注意到该定时器是在creadted()创建的，在nuxt中该生命周期会同时运行在服务端和客户端，所以每访问一次都会创建一个定时器，而这个定时器只有倒计时结束时才结束，悲剧的是倒计时有时是后几天的时间...所以才会造成内存泄漏。在使用nuxt时一定要仔细看好哪些是在服务端运行的，不然很有可能出大问题。